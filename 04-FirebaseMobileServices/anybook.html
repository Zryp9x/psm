<!DOCTYPE html>
<html lang="pl">
  <head>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dodaj</title>
  </head>

  <body>
    <div id="root">
      <input type="text" id="author" value="" placeholder="Author" /><br /><br />
      <input type="text" id="title" value="" placeholder="Title" /><br /><br />
      <input type="text" id="genre" value="" placeholder="Genre" /><br /><br />
      <input type="text" id="year" value="" placeholder="Year" /><br /><br />
      <input type="text" id="isbn" value="" placeholder="ISBN" /><br /><br />
      <button onclick="submit()">Add new book</button>
    </div>

    <script>

    </script>

    <script>
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyBK3jlX7j8BlYib4pZMogmYky_chsPYaV8",
    authDomain: "mybook-c7dc5.firebaseapp.com",
    databaseURL: "https://mybook-c7dc5.firebaseio.com",
    projectId: "mybook-c7dc5",
    storageBucket: "mybook-c7dc5.appspot.com",
    messagingSenderId: "56464553509",
    appId: "1:56464553509:web:4a1e99bc0475a02d18b1cc",
    measurementId: "G-TKGKMZFF03"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();

      const ids = ["author", "title", "genre", "year", "isbn"];
      let values = new Array(5).fill("");

      for (let id in ids) {
        let el = document.getElementById(ids[id]);
        el.addEventListener("change", (e) => {
          values[id] = e.target.value;
        });
      }

      function submit() {
        db.collection("Book").add({
            author: values[0],
            title: values[1],
            genre: values[2],
            year: values[3].toString(),
            isbn: values[4]
        }).then(cb => console.log("added book")).catch(er => console.log(`Exception caught: ${e.message}`))
      }
    </script>
  </body>
</html>
